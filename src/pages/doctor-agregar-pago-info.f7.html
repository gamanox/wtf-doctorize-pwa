<template>
    <div class="page" id="doctor-agregar-pago-info">
        <div class="header">
            <div class="addPay info">
                <a class="back">
                    <i class="material-icons">chevron_left</i>
                </a>
                <p class="title1">Informaci√≥n de pago</p>
            </div>
        </div>
        <div class="page-content">
            <div class="quantity list">
                <ul>
                    <li class="item-content item-input">
                        <div class="item-inner">
                            <label for="">Cantidad total:</label>
                            <div class="item-input-wrap rounded">
                                <i class="material-icons grey">
                                    monetization_on
                                </i>
                                <input type="number" name="quantity" id="quantity" placeholder="Cantidad" required
                                    validate value="600.00">
                                <span class="input-clear-button"></span>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="breakdown">
                <div class="title">
                    Desglose de pago:
                </div>
                <div class="total">
                    <p class="label">Total</p>
                    <p class="data dark-blue">$600.00</p>
                </div>
                <div class="total2pay">
                    <p class="label">Total a pagar</p>
                    <p class="data turquoise">$600.00</p>
                </div>
                <div class="method">
                    <p class="label">Metodo de pago</p>
                    <p class="data dark-blue" style="text-align: right;">Efectivo</p>
                </div>
            </div>
            <div class="container">
                <div class="btn-2">
                    <a href="#">
                        <p>Siguiente </p>
                        <i class="material-icons white">chevron_right</i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</template>
<script>
    import $$ from 'dom7';

    export default {
        on: {
            pageInit: function(e, page) {
                var self = this;
                var app = self.$app;
                app.data.store.getItem('metodo').then(function(e) {
                    $$('#doctor-agregar-pago-info .method .data').text(e);

                    enableButton();

                    $$(document).on('input:empty', function(e) {
                        disableButton();
                    });

                    $$('#doctor-agregar-pago-info input').on('input:notempty', function(e) {
                        $$('#doctor-agregar-pago-info .total .data').text('$' + $$(this).val());
                        $$('#doctor-agregar-pago-info .total2pay .data').text('$' + $$(this).val());
                        enableButton();
                    });
                });

                function disableButton() {
                    $$('#doctor-agregar-pago-info .btn-2 a').addClass('grey');
                    $$('#doctor-agregar-pago-info .btn-2 a').off('click');
                }

                function enableButton() {
                    $$('#doctor-agregar-pago-info .btn-2 a').removeClass('grey');
                    $$('#doctor-agregar-pago-info .btn-2 a').off('click');
                    $$('#doctor-agregar-pago-info .btn-2 a').click(function() {
                        app.data.store.setItem('costo', $$('#doctor-agregar-pago-info input').val()).then(function() {
                            app.methods.redirectTo('doctor-agregar-pago-summary');
                        });

                    });
                }
                /* app.request.get(app.data.url,
                    function(e) {
                        var x = JSON.parse(e);
                        $$('#doctor-agregar-pago-info .total .data').val('$500.00');
                        $$('#doctor-agregar-pago-info .total2pay .data').val('$500.00');
                    },
                ); */
            }
        }
    }
</script>