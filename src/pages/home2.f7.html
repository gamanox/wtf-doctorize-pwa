<template>
  <div class="page" data-name="home" id="home">

    <div class="toolbar tabbar tabbar-labels toolbar-bottom menu">
      <div class="toolbar-inner">
        <a href="/home" class="tab-link tab-link-active">
          <!-- Different icons for iOS and MD themes -->
          <i class="icon material-icons">home</i>
        </a>
        <a href="/schedule" class="tab-link">
          <i class="icon material-icons">today</i>
        </a>
        <a href="#" class="tab-link">
        </a>
        <a href="#" class="tab-link">
          <i class="icon material-icons">monetization_on</i>
        </a>
        <a href="#" class="tab-link">
          <i class="icon material-icons">settings</i>
        </a>
      </div>
      <div class="add-circle">
        <a>
          <img src="/static/images/add_circle_24px.svg" class="dynamic-sheet" alt="">
        </a>
      </div>
    </div>

    <div class="page-content login-screen-content">
      <div class="list">
        <ul>
          <li>
            <div class="row">
              <div class="col">
                <a href="/intro-splash-01" data-view=".view-main"
                  class="item-link list-button login-register-button">Intro</a>
              </div>
            </div>
          </li>
          <li>
            <div class="row">
              <div class="col">
                <a href="#" data-view=".view-main"
                  class="item-link list-button login-register-button panel-open">Ajustes</a>
              </div>
            </div>
          </li>
          <li>
            <div class="row">
              <div class="col">
                <a href="/" data-view=".view-main" class="item-link list-button login-register-button logout">Salir</a>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <div class="panel panel-left panel-cover panel-resizable">
      <div class="block">
        <a class="panel-close" href="#">Salir</a>
        <h1>AJUSTES</h1>
      </div>
      <a href="#" class="avatar">
        <img src="../static/images/logo.png"></img>
      </a>
      <div class="block doctor">
        <h3 class="name">Dr. Bryan Gosling</h3>
        <h4 class="mail">bryan.gosling@medica2k.med</h4>
      </div>
      <div class="list">
        <ul>
          <li>
            <div class="row">
              <div class="card card-outline elevation-3" id="personal-settings">
                <div class="rectangle"></div>
                <i class="material-icons icon">person</i>
                <div class="card-content card-content-padding">
                  <h3 class="settings-name">Información Personal</h3>
                </div>
                <div class="link arrow">
                  <i class="material-icons">chevron_right</i>
                </div>
              </div>
            </div>
          </li>
          <li>
            <div class="row">
              <div class="card card-outline elevation-3" id="offices-settings">
                <div class="rectangle"></div>
                <i class="material-icons icon" style="left: -21%;">meeting_room</i>
                <div class="card-content card-content-padding">
                  <h3 class="settings-name">Consultorios</h3>
                </div>
                <div class="link arrow">
                  <i class="material-icons">chevron_right</i>
                </div>
              </div>
            </div>
          </li>
          <li>
            <div class="row">
              <div class="card card-outline elevation-3" id="assistants-settings">
                <div class="rectangle"></div>
                <i class="material-icons icon">headset_mic</i>
                <div class="card-content card-content-padding">
                  <h3 class="settings-name">Asistentes</h3>
                </div>
                <div class="link arrow">
                  <i class="material-icons">chevron_right</i>
                </div>
              </div>
            </div>
          </li>
          <li>
            <div class="row">
              <div class="card card-outline elevation-3" id="cash-settings">
                <div class="rectangle"></div>
                <i class="material-icons icon">account_balance</i>
                <div class="card-content card-content-padding">
                  <h3 class="settings-name">Bancos y Tarjetas</h3>
                </div>
                <div class="link arrow">
                  <i class="material-icons">chevron_right</i>
                </div>
              </div>
            </div>
          </li>
          <li>
            <div class="row">
              <div class="card card-outline elevation-3" id="suscription-settings">
                <div class="rectangle"></div>
                <i class="material-icons icon">local_activity</i>
                <div class="card-content card-content-padding">
                  <h3 class="settings-name">Suscripción</h3>
                </div>
                <div class="link arrow">
                  <i class="material-icons">chevron_right</i>
                </div>
              </div>
            </div>
          </li>
          <li>
            <div class="row">
              <div class="card card-outline elevation-3" id="help-settings">
                <div class="rectangle"></div>
                <i class="material-icons icon">contact_support</i>
                <div class="card-content card-content-padding">
                  <h3 class="settings-name">Ayuda</h3>
                </div>
                <div class="link arrow">
                  <i class="material-icons">chevron_right</i>
                </div>
              </div>
            </div>
          </li>
          <li>
            <div class="row">
              <div class="card card-outline elevation-3" id="law-settings">
                <div class="rectangle"></div>
                <i class="material-icons icon">gavel</i>
                <div class="card-content card-content-padding">
                  <h3 class="settings-name">Legales</h3>
                </div>
                <div class="link arrow">
                  <i class="material-icons">chevron_right</i>
                </div>
              </div>
            </div>
          </li>
          <li>
            <div class="row">
              <div class="card card-outline elevation-3" id="notifications-settings">
                <div class="rectangle"></div>
                <i class="material-icons icon">notifications</i>
                <div class="card-content card-content-padding">
                  <h3 class="settings-name">Notificaciones</h3>
                </div>
                <div class="link arrow">
                  <i class="material-icons">chevron_right</i>
                </div>
              </div>
            </div>
          </li>
          <li>
            <div class="row">
              <div class="card card-outline elevation-3" id="security-settings">
                <div class="rectangle"></div>
                <i class="material-icons icon">vpn_key</i>
                <div class="card-content card-content-padding">
                  <h3 class="settings-name">Sesión y Seguridad</h3>
                </div>
                <div class="link arrow">
                  <i class="material-icons">chevron_right</i>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>

  </div>

</template>
<script>
  import $$ from 'dom7';
  export default {
    on: {
      pageInit: function (e, page) {
        var self = this;
        var app = self.$app;

        $$('.logout').click(function (params) {
          app.data.store.clear();
          app.methods.redirectTo('root');
        });

        $$('.panel-open').click(function (e) {
          app.data.store.getItem('doctor').then(function (value) {
            app.data.doctor = value;
            $$(".doctor .name").text(app.data.doctor.name);
            $$(".doctor .mail").text(app.data.doctor.email);
            $$(".panel .avatar").html('<img src="' + app.data.url + '/' + app.data.doctor.photo + '200.png" alt="not found">');
          });
          var panel = app.panel.create({
            el: '.panel',
          });
          panel.open();

          $$(".panel .avatar").click(function (e) {
            panel.close();
            app.data.flow = 'UD';
            app.data.store.setItem('flow', app.data.flow).then(function (value) {
              app.methods.redirectTo('photo-module');
            });
          });
        });

        $$('.dynamic-sheet').on('click', function () {
          var dynamicSheet = app.sheet.create({
            content: '<div class="sheet-modal">' +
              '<div class="close-sheet">' +
              '<img src="/static/images/cancel_24px.svg" alt="" class="close">' +
              '</div>' +
              '<div class="sheet-modal-inner">' +
              '<div class="list">' +
              '<ul>' +
              '<li>' +
              '<div class="row">' +
              '<div class="col">' +
              '<a href="#" data-view=".view-main" class="item-link list-button login-register-button consultorios">' +
              '<i class="material-icons">local_hospital</i>' +
              'Consultorios</a>' +
              '</div>' +
              '</div>' +
              '</li>' +
              '<li>' +
              '<div class="row">' +
              '<div class="col">' +
              '<a href="#" data-view=".view-main" class="item-link list-button login-register-button asistentes">' +
              '<i class="material-icons">headset_mic</i>' +
              'Asistentes</a>' +
              '</div>' +
              '</div>' +
              '</li>' +
              '<li>' +
              '<div class="row">' +
              '<div class="col">' +
              '<a href="#" data-view=".view-main" class="item-link list-button login-register-button cita">' +
              '<i class="material-icons">event</i>' +
              'Nueva cita</a>' +
              '</div>' +
              '</div>' +
              '</li>' +
              '<li>' +
              '<div class="row">' +
              '<div class="col">' +
              '<a href="#" data-view=".view-main" class="item-link list-button login-register-button paciente">' +
              '<i class="material-icons">person_add</i>' +
              'Nuevo Paciente</a>' +
              '</div>' +
              '</div>' +
              '</li>' +
              '</ul>' +
              '</div>' +
              '</div>' +
              '</div>',
            on: {
              open: function (sheet) {
                console.log('Sheet open');
              },
              opened: function (sheet) {
                $$('.sheet-modal .close').on('click', function () {
                  dynamicSheet.close();
                });
                $$('.sheet-modal .consultorios').click(function () {
                  dynamicSheet.close();
                  app.methods.redirectTo('offices-show');
                });
                $$('.sheet-modal .asistentes').click(function () {
                  dynamicSheet.close();
                  app.methods.redirectTo('asistentes-invitar-01');
                });
                $$('.sheet-modal .cita').click(function () {
                  dynamicSheet.close();
                  app.methods.redirectTo('agendar-cita');
                });
                $$('.sheet-modal .paciente').click(function () {
                  dynamicSheet.close();
                  app.methods.redirectTo('nuevo-paciente');
                });
              },
            }
          });
          dynamicSheet.open();
        });
      }
    }
  }
</script>